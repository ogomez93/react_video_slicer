(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{133:function(e){e.exports={nameFilter:"",tagFilter:""}},146:function(e,t,n){e.exports=n(329)},325:function(e,t,n){},329:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(23),o=n.n(r),c=n(20),l=n(144);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var d,s,u=n(57),p=n(22),m=n(145),v=n(16),f=6,g=[{duration:0,clips:[],loading:!0,paused:!0,videoUrl:"https://download.blender.org/durian/trailer/sintel_trailer-480p.mp4"}],b=function(e,t){return e[t]},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0,n=t.payload;switch(t.type){case"videos/ADD_CLIP":return s=b(e,n.videoIndex),d=s.clips,Object.assign([],e,Object(p.a)({},n.videoIndex,Object(v.a)({},s,{clips:Object(m.a)(d).concat([n.clip])})));case"videos/EDIT_CLIP":return s=b(e,n.videoIndex),d=s.clips,Object.assign([],e,Object(p.a)({},n.videoIndex,Object(v.a)({},s,{clips:Object.assign([],d,Object(p.a)({},n.clipIndex,n.clip))})));case"videos/REMOVE_CLIP":return s=b(e,n.videoIndex),d=s.clips,Object.assign([],e,Object(p.a)({},n.videoIndex,Object(v.a)({},s,{clips:d.slice(0,n.clipIndex).concat(d.slice(n.clipIndex+1))})));case"videos/SET_DURATION":return s=b(e,n.videoIndex),Object.assign([],e,Object(p.a)({},n.videoIndex,Object(v.a)({},s,{duration:n.duration,loading:!1})));case"videos/CLIP_CHANGE":return s=b(e,n.videoIndex),Object.assign([],e,Object(p.a)({},n.videoIndex,Object(v.a)({},s,{loading:!0,paused:!0})));case"videos/PAUSE_VIDEO":return s=b(e,n.videoIndex),Object.assign([],e,Object(p.a)({},n.videoIndex,Object(v.a)({},s,{paused:!0})));case"videos/PLAY_VIDEO":return s=b(e,n.videoIndex),Object.assign([],e,Object(p.a)({},n.videoIndex,Object(v.a)({},s,{paused:!1})));default:return Object(v.a)({},e)}},x=n(133),I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"filters/SET_NAME_FILTER":return Object(v.a)({},e,{filters:Object(v.a)({},e.filters,{nameFilter:t.payload.nameFilter})});case"filters/SET_TAG_FILTER":return Object(v.a)({},e,{filters:Object(v.a)({},e.filters,{tagFilter:t.payload.tagFilter})});default:return e}},O=Object(u.b)({filters:I,videos:E}),h=n(143),j=n.n(h),C=n(4),y=n(19),N=n(17),D=n.n(N),F=n(45),T=n.n(F),w=n(65),P=n.n(w),S=n(85),A=n.n(S),k=n(46),L=n.n(k),V=n(66),_=n.n(V),M=n(67),R=n.n(M),U=n(90),B=n.n(U),W=n(64),G=n.n(W),H=n(139),J=n.n(H),Y=n(141),q=n.n(Y),$=n(89),z=n.n($),K=n(24),Q=n.n(K),X=n(140),Z=n.n(X),ee=n(25),te=n.n(ee),ne=n(136),ae=n.n(ne),ie=n(59),re=n.n(ie),oe=n(135),ce=n.n(oe),le=n(58),de=n.n(le),se=function(e){var t=e.dialogDescription,n=e.dialogTitle,r=e.end,o=e.name,c=e.start,l=e.onClose,d=e.deleteItem;return i.a.createElement(a.Fragment,null,i.a.createElement(de.a,{id:n},"Are you sure you want to delete this clip?"),i.a.createElement(re.a,null,i.a.createElement(ce.a,{id:t},"Name: '".concat(o,"', from ").concat(c," to ").concat(r))),i.a.createElement(ae.a,null,i.a.createElement(te.a,{onClick:l,color:"primary"},"Cancel"),i.a.createElement(te.a,{onClick:d,color:"secondary"},"Delete")))},ue=n(60),pe=n(61),me=n(68),ve=n(62),fe=n(69),ge=n(63),be=n.n(ge),Ee=n(88),xe=n.n(Ee),Ie=function(e,t){return{type:"videos/ADD_CLIP",payload:{clip:e,videoIndex:t}}},Oe=function(e,t,n){return{type:"videos/EDIT_CLIP",payload:{clip:e,clipIndex:t,videoIndex:n}}},he=function(e){return{type:"videos/PAUSE_VIDEO",payload:{videoIndex:e}}},je=function(e){return{type:"videos/PLAY_VIDEO",payload:{videoIndex:e}}},Ce=function(e){return e<10?"0".concat(e):"".concat(e)},ye=function(e){var t=parseFloat(e.toFixed(f));return t<60?"".concat(e," seconds"):Ne(t)},Ne=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;if(!isNaN(e)){var n=parseFloat(e*t/100),a=Ce(parseInt(n/60)),i=Ce(parseInt(n%60));return"".concat(a,":").concat(i)}},De=function(e){var t=e.name,n=e.start,a=e.end,i=[];return function(e){return""!==e}(t)||i.push("Name must not be empty."),function(e,t){return e<t&&e<100&&t<=100}(n,a)||i.push("Invalid time range."),i},Fe=function(e){function t(e){var n;return Object(ue.a)(this,t),(n=Object(me.a)(this,Object(ve.a)(t).call(this,e))).handleNameChange=function(e){var t=e.target.value;return n.setState({name:t})},n.handleStartChange=function(e,t){var a=n.state.end;t>=a&&(t=a-1),n.setState({start:t})},n.handleEndChange=function(e,t){var a=n.state.start;a>=t&&(t=a+1),n.setState({end:t})},n.onFocus=function(e){return e.target.select()},n.onSubmit=function(e){e.preventDefault();var t=n.state,a=n.props,i=a.clipIndex,r=a.dispatch,o=a.videoIndex,c=a.onCancel,l=De(t);0===l.length?(r(isNaN(i)?Ie(t,o):Oe(t,i,o)),c&&c()):console.log(l)},n.state={end:e.end||100,name:e.name||"",start:e.start||0},n}return Object(fe.a)(t,e),Object(pe.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.video.duration,a=e.clipIndex,r=void 0===a?"":a,o=e.videoIndex,c=void 0===o?"":o,l=e.onCancel,d=this.state,s=d.name,u=d.start,p=d.end;return i.a.createElement("form",{onSubmit:this.onSubmit,clipindex:r,videoindex:c},i.a.createElement(D.a,{container:!0,spacing:16},i.a.createElement(D.a,{item:!0,xs:12},i.a.createElement(be.a,{id:"clipName",className:t.textField,label:"Clip name",margin:"normal",name:"name",onChange:this.handleNameChange,onFocus:this.onFocus,required:!0,value:s})),i.a.createElement(D.a,{item:!0,xs:12},i.a.createElement(Q.a,{id:"startLabel"},"From ".concat(Ne(u,n))),i.a.createElement(xe.a,{id:"clipStart",classes:{container:t.slider},"aria-labelledby":"startLabel",min:0,max:100,name:"start",onChange:this.handleStartChange,value:u})),i.a.createElement(D.a,{item:!0,xs:12},i.a.createElement(Q.a,{id:"endLabel"},"To ".concat(Ne(p,n))),i.a.createElement(xe.a,{id:"clipEnd",classes:{container:t.slider},"aria-labelledby":"endLabel",min:0,max:100,name:"end",onChange:this.handleEndChange,value:p})),i.a.createElement(D.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"flex-end"},i.a.createElement(te.a,{className:t.button,onClick:l},"Cancel"),i.a.createElement(te.a,{className:t.button,color:"primary",type:"submit",onClick:this.onSubmit},"Save"))))}}]),t}(a.Component),Te=Object(C.b)(Object(y.withStyles)(function(e){return{button:{margin:e.spacing.unit},container:Object(v.a)({},e.mixins.gutters(),{width:"100%",display:"flex",alignItems:"center",backgroundColor:"red",padding:2*e.spacing.unit}),slider:{padding:"".concat(e.spacing.unit,"px 0px")},textField:{width:"100%",margin:0,marginBottom:e.spacing.unit}}}),Object(c.b)())(Fe),we=function(e){var t=e.dialogTitle,n=e.end,r=e.name,o=e.start,c=e.clipIndex,l=e.videoIndex,d=e.video,s=e.onCancel;return i.a.createElement(a.Fragment,null,i.a.createElement(de.a,{id:t},"Editing clip"),i.a.createElement(re.a,null,i.a.createElement(Te,{end:n,name:r,start:o,video:d,clipIndex:c,videoIndex:l,onCancel:s})))},Pe=Object(C.b)(Object(C.d)({onCancel:function(e){var t=e.closeEditing,n=e.closeMenu;return function(){t&&t(),n&&n()}}}))(we),Se=n(137),Ae=n.n(Se),ke=function(e){var t=e.clipIndex,n=e.Icon,a=e.label,r=e.onClick;return i.a.createElement(G.a,{"aria-label":a,clipindex:t,onClick:r},i.a.createElement(n,null))},Le=Object(C.b)(Object(C.e)({label:"Pause",Icon:Ae.a}),Object(c.b)(null,function(e,t){return{onClick:function(e,t){var n=t.videoIndex;return function(){return e(he(n))}}(e,t)}}))(ke),Ve=n(138),_e=n.n(Ve),Me=Object(C.b)(Object(C.e)({label:"Play",Icon:_e.a}),Object(c.b)(null,function(e,t){return{onClick:t.selected?function(e,t){var n=t.videoIndex;return function(){return e(je(n))}}(e,t):t.setClip}}))(ke),Re=function(e){var t=e.name,n=e.start,r=e.end,o=e.video,c=e.clipIndex,l=e.videoIndex,d=e.selected,s=e.setClip,u=e.deleting,p=e.editing,m=e.anchorEl,v=e.openMenu,f=e.closeMenu,g=e.deleteItem,b=e.openEditing,E=e.closeEditing,x=e.openDeleting,I=e.closeDeleting;return i.a.createElement(a.Fragment,null,i.a.createElement(P.a,{component:"li"}),i.a.createElement(L.a,{title:"Play ".concat(t),button:!0,component:"a",selected:d},i.a.createElement(J.a,null,d&&!o.paused?i.a.createElement(Le,{clipIndex:c,selected:d,setClip:s,videoIndex:l}):i.a.createElement(Me,{clipIndex:c,selected:d,setClip:s,videoIndex:l})),i.a.createElement(_.a,{primary:t,secondary:"".concat(Ne(n,o.duration)," - ").concat(Ne(r,o.duration)),onClick:s,clipindex:c}),i.a.createElement(R.a,{title:"".concat(t," options")},i.a.createElement(G.a,{"aria-label":"More","aria-owns":m?"clipMenu":void 0,"aria-haspopup":"true",onClick:v},i.a.createElement(Z.a,null))),i.a.createElement(q.a,{id:"clipMenu",anchorEl:m,open:Boolean(m),onClose:f},i.a.createElement(z.a,{onClick:b},"Edit"),i.a.createElement(z.a,{onClick:x,color:"secondary"},i.a.createElement(Q.a,{color:"secondary"},"Delete"))),i.a.createElement(B.a,{open:u,onClose:I,"aria-labelledby":"deleteClipDialog","aria-describedby":"deleteClipDialogDescription"},i.a.createElement(se,{dialogTitle:"deleteClipDialog",dialogDescription:"deleteClipDialogDescription",end:r,name:t,start:n,onClose:I,deleteItem:g})),i.a.createElement(B.a,{open:p,onClose:E,"aria-labelledby":"editClipDialog"},i.a.createElement(Pe,{dialogTitle:"editClipDialog",end:r,name:t,start:n,video:o,clipIndex:c,videoIndex:l,closeEditing:E,closeMenu:f}))))},Ue=Object(C.f)("anchorEl","setAnchorEl",!1),Be=Object(C.f)("editing","setEditing",!1),We=Object(C.f)("deleting","setDeleting",!1),Ge=Object(C.b)(Ue,We,Be,Object(C.d)({closeMenu:function(e){var t=e.setAnchorEl;return function(){return t(null)}},openMenu:function(e){var t=e.setAnchorEl;return function(e){return t(e.currentTarget)}},openEditing:function(e){var t=e.setEditing;return function(){return t(!0)}},closeEditing:function(e){var t=e.setEditing;return function(){return t(!1)}},openDeleting:function(e){var t=e.setDeleting;return function(){return t(!0)}},closeDeleting:function(e){var t=e.setDeleting;return function(){return t(!1)}}}),Object(c.b)(null,function(e,t){return{deleteItem:function(){var n=t.closeMenu,a=t.closeDeleting,i=t.clipIndex,r=t.setFullVideo,o=t.videoIndex;e(function(e,t){return{type:"videos/REMOVE_CLIP",payload:{clipIndex:e,videoIndex:t}}}(i,o)),a&&a(),n&&n(),r&&r()}}}))(Re),He=Object(y.withStyles)(function(){return{list:{overflow:"auto"}}})(function(e){var t=e.classes,n=e.clipIndex,a=e.setClip,r=e.setFullVideo,o=e.video,c=o.clips,l=void 0===c?[]:c,d=o.videoUrl,s=o.duration,u=o.paused,p=e.videoIndex;return i.a.createElement(A.a,{className:t.list},i.a.createElement(L.a,{title:"Play full video",selected:-1===n,button:!0,component:"a"},i.a.createElement(_.a,{primary:"Full video (duration: ".concat(ye(s),")"),secondary:d,secondaryTypographyProps:{noWrap:!0,title:d},clipindex:-1,onClick:a}),i.a.createElement(R.a,null,-1!==n||u?i.a.createElement(Me,{clipIndex:-1,selected:-1===n,setClip:a,videoIndex:p}):i.a.createElement(Le,{clipIndex:-1,selected:-1===n,setClip:a,videoIndex:p}))),l.map(function(e,t){return i.a.createElement(Ge,Object.assign({},e,{key:"clip-".concat(t),clipIndex:t,selected:n===t,setClip:a,setFullVideo:r,video:{duration:s,paused:u,videoUrl:d},videoIndex:p}))}))}),Je=Object(y.withStyles)(function(e){return{loadingVideo:{margin:4*e.spacing.unit}}})(function(e){var t=e.classes;return i.a.createElement(Q.a,{className:t.loadingVideo,variant:"subtitle2"},"Please wait...")}),Ye=Object(C.b)(Object(C.a)(function(e){var t=e.video,n=t.duration,a=t.loading;return 0===n&&a},Object(C.c)(Je)))(He),qe=n(142),$e=n.n(qe),ze=Object(y.withStyles)(function(e){return{rightIcon:{marginLeft:e.spacing.unit},hidden:{opacity:0}}})(function(e){var t=e.classes,n=e.video.loading,a=e.setAdding;return i.a.createElement(te.a,{className:n?t.hidden:"",color:"primary",disabled:n,onClick:a,variant:"contained"},"ADD NEW CLIP",i.a.createElement($e.a,{className:t.rightIcon}))}),Ke=Object(C.b)(Object(C.d)({onCancel:function(e){var t=e.setNotAdding;return function(){return t()}}}))(Te),Qe=Object(C.f)("isAdding","setIsAdding",!1),Xe=Object(C.b)(Qe,Object(C.d)({setAdding:function(e){var t=e.setIsAdding;return function(){return t(!0)}},setNotAdding:function(e){var t=e.setIsAdding;return function(){return t(!1)}}}),Object(C.a)(function(e){return e.isAdding},Object(C.c)(Ke)))(ze),Ze=Object(y.withStyles)(function(){return{container:{width:"100%",display:"flex",alignItems:"center"},textField:{width:"100%",margin:0}}})(function(e){var t=e.classes,n=e.name,a=e.onNameChange,r=e.onSubmit;return i.a.createElement("form",{className:t.container,autoComplete:"off",onSubmit:r},i.a.createElement(be.a,{id:"searchBar",label:"Search clips by name",className:t.textField,value:n,onChange:a,margin:"normal"}))}),et=Object(C.f)("name","setName",""),tt=Object(C.b)(et,Object(C.d)({onNameChange:function(e){var t=e.setName;return function(e){var n=e.target,a=(n=void 0===n?{}:n).value;return t(void 0===a?"":a)}}}),Object(c.b)(null,function(e,t){var n=t.name;return{onSubmit:function(t){t.preventDefault(),e({type:"filters/SET_NAME_FILTER",payload:{nameFilter:n}})}}}))(Ze),nt=function(e){var t=e.video.videoUrl,n=void 0===t?"":t;return i.a.createElement(Q.a,{variant:"caption",gutterBottom:!0,noWrap:!0},n)},at=function(e){function t(e){var n;return Object(ue.a)(this,t),(n=Object(me.a)(this,Object(ve.a)(t).call(this,e))).formatTimeToFixed=function(e){return parseFloat(e.toFixed(f))},n.getVideo=function(){return n.videoRef.current},n.getCurrentTime=function(){return n.formatTimeToFixed(n.getVideo().currentTime)},n.videoPaused=function(){return n.videoRef.current.paused},n.onTimeUpdate=function(){void 0!==n.props.clip&&(n.getCurrentTime()>n.formatTimeToFixed(n.props.clip.end)&&n.getVideo().pause())},n.pauseVideo=function(){return n.videoRef.current.pause()},n.playVideo=function(){if(void 0===n.props.clip)return n.getVideo().play();var e=n.getCurrentTime(),t=n.formatTimeToFixed(n.props.clip.start),a=n.formatTimeToFixed(n.props.clip.end);(e<t||a<=e)&&(n.videoRef.current.currentTime=t),n.videoRef.current.play()},n.state={paused:e.video.paused},n.videoRef=Object(a.createRef)(),n}return Object(fe.a)(t,e),Object(pe.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this.videoPaused(),n=e.video.paused,a=this.props.video.paused;n!==a&&a!==t&&(t?this.playVideo():this.pauseVideo())}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.onLoadedMetadata,a=e.onPause,r=e.onPlay,o=e.url;return i.a.createElement("video",{ref:this.videoRef,className:t.videoPlayer,controls:!this.props.clip,name:"media",onLoadedMetadata:n,onPause:a,onPlay:r,onTimeUpdate:this.onTimeUpdate,preload:"metadata",src:o})}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.video.paused;return n!==t.paused?{paused:n}:null}}]),t}(a.Component),it=Object(y.withStyles)(function(){return{videoPlayer:{width:"100%"}}})(at),rt=Object(C.e)(function(e){var t=e.clip;return{mediaFragment:t?"#t=".concat(t.start,",").concat(t.end):""}}),ot=Object(C.e)(function(e){var t=e.mediaFragment,n=e.video.videoUrl;return{url:"".concat(n).concat(t)}}),ct=Object(C.b)(Object(c.b)(function(e,t){return{clip:function(e,t){var n=e.videos,a=void 0===n?[{}]:n,i=t.videoIndex,r=void 0===i?0:i,o=t.clipIndex,c=void 0===o?-1:o;return a[r].clips[c]}(e,t)}},function(e,t){var n=t.videoIndex;return{onLoadedMetadata:function(t){return e(function(e,t){return{type:"videos/SET_DURATION",payload:{duration:e,videoIndex:t}}}(t.target.duration,n))},onPause:function(){return e(he(n))},onPlay:function(){return e(je(n))}}}),rt,ot)(it),lt=Object(y.withStyles)(function(e){return{root:Object(v.a)({flexGrow:1},e.mixins.gutters(),{height:"100vh",padding:2*e.spacing.unit}),container:{height:"100%"},paper:{padding:2*e.spacing.unit,textAlign:"center",color:e.palette.text.primary},listPaper:{padding:2*e.spacing.unit,textAlign:"center",color:e.palette.text.primary,height:"100%",display:"flex",flexDirection:"column"},clipsList:{flex:1},sectionDivider:{marginBottom:2*e.spacing.unit,marginTop:2*e.spacing.unit},columnContainer:Object(p.a)({flexDirection:"column"},e.breakpoints.up("md"),{height:"100%"}),newClipContainer:Object(p.a)({display:"flex",alignItems:"center",justifyContent:"center"},e.breakpoints.down("sm"),{flexBasis:"100%",marginTop:2*e.spacing.unit})}})(function(e){var t=e.classes,n=e.clipIndex,a=e.setClip,r=e.setFullVideo,o=e.video,c=e.videoIndex;return i.a.createElement("div",{className:t.root},i.a.createElement(D.a,{className:t.container,container:!0,spacing:24},i.a.createElement(D.a,{item:!0,xs:12,md:6,className:t.columnContainer},i.a.createElement(D.a,{container:!0,className:t.columnContainer},i.a.createElement(D.a,{item:!0},i.a.createElement(T.a,{className:t.paper},i.a.createElement(ct,{video:o,videoIndex:c,clipIndex:n}),i.a.createElement(nt,{video:o,clipIndex:n}))),i.a.createElement(D.a,{item:!0,xs:!0,className:t.newClipContainer},i.a.createElement(Xe,{video:o,videoIndex:c})))),i.a.createElement(D.a,{item:!0,xs:12,md:6},i.a.createElement(D.a,{container:!0,className:t.columnContainer},i.a.createElement(T.a,{className:t.listPaper},i.a.createElement(D.a,{container:!0,spacing:24,alignItems:"center"},i.a.createElement(D.a,{item:!0,xs:12,md:6},i.a.createElement(tt,null)),i.a.createElement(D.a,{item:!0,xs:12,md:6})),i.a.createElement(P.a,{className:t.sectionDivider}),i.a.createElement(D.a,{alignItems:"stretch",className:t.clipsList,container:!0,direction:"column",justify:"flex-start",spacing:24},i.a.createElement(Ye,{clipIndex:n,setClip:a,setFullVideo:r,video:o,videoIndex:c})))))))}),dt=Object(C.f)("clipIndex","setClipIndex",-1),st=Object(C.f)("videoIndex","setVideoIndex",0),ut=function(e,t){var n=t.clipIndex,a=t.setClipIndex,i=t.videoIndex;return function(t){var r=parseInt(t.currentTarget.getAttribute("clipindex"));a(isNaN(r)?-1:r),n!==r&&e(function(e){return{type:"videos/CLIP_CHANGE",payload:{videoIndex:e}}}(i))}},pt=Object(C.b)(st,dt,Object(C.d)({setClip:ut,setFullVideo:function(e){var t=e.setClipIndex;return function(){return t&&t(-1)}}}),Object(c.b)(function(e,t){return{video:function(e,t){var n=e.videos,a=void 0===n?[{}]:n,i=t.videoIndex;return a[void 0===i?0:i]}(e,t)}},function(e,t){return{setClip:ut(e,t)}}))(lt),mt=function(){return i.a.createElement(a.Fragment,null,i.a.createElement(j.a,null),i.a.createElement(pt,null))};n(325);n.d(t,"store",function(){return vt});var vt=Object(l.configureStore)({devTools:!0,reducer:O});o.a.render(i.a.createElement(c.a,{store:vt},i.a.createElement(mt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[146,2,1]]]);
//# sourceMappingURL=main.fc249d47.chunk.js.map